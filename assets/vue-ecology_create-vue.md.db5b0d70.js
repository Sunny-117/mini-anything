import{_ as s,o as a,c as n,a as l}from"./app.ff4ec926.js";const o="/mini-anything-docs/assets/2023-02-02-13-14-20.5cb702ee.png",p="/mini-anything-docs/assets/2023-02-02-13-35-36.580f1cea.png",A=JSON.parse('{"title":"create-vue","description":"","frontmatter":{},"headers":[{"level":2,"title":"create-vue 简单介绍","slug":"create-vue-简单介绍","link":"#create-vue-简单介绍","children":[]},{"level":2,"title":"从 package.json 开始","slug":"从-package-json-开始","link":"#从-package-json-开始","children":[{"level":3,"title":"开发依赖 devDependencies","slug":"开发依赖-devdependencies","link":"#开发依赖-devdependencies","children":[]}]},{"level":2,"title":"源码解读","slug":"源码解读","link":"#源码解读","children":[]}],"relativePath":"vue-ecology/create-vue.md","lastUpdated":1707200727000}'),e={name:"vue-ecology/create-vue.md"},t=l('<h1 id="create-vue" tabindex="-1">create-vue <a class="header-anchor" href="#create-vue" aria-hidden="true">#</a></h1><h2 id="create-vue-简单介绍" tabindex="-1">create-vue 简单介绍 <a class="header-anchor" href="#create-vue-简单介绍" aria-hidden="true">#</a></h2><p>🛠️ The recommended way to start a Vite-powered Vue project</p><p>翻译成中文是：启动 Vite 驱动的 Vue 项目的推荐方法</p><p>你可以通过 <code>npm create vue@3</code>命令来快速搭建 Vue3 项目</p><p><img src="'+o+`" alt=""></p><blockquote><p>用过 vite 的小伙伴可能还会知道用 vite 搭建项目，不过 vite 搭建的项目需要安装对应的插件来解析 vue 文件。两者都可以快速搭建 vue 项目。</p></blockquote><div class="danger custom-block"><p class="custom-block-title">注意</p><p>Vue 官方已经不推荐使用 vue-cli 搭建工程，只对 vue-cli 进行 bug 修复和维护工作，不会添加新的 feature</p></div><h2 id="从-package-json-开始" tabindex="-1">从 package.json 开始 <a class="header-anchor" href="#从-package-json-开始" aria-hidden="true">#</a></h2><h3 id="开发依赖-devdependencies" tabindex="-1">开发依赖 devDependencies <a class="header-anchor" href="#开发依赖-devdependencies" aria-hidden="true">#</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">devDependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">@types/eslint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^8.4.10</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">@types/node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^18.11.18</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">@types/prompts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^2.4.2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">@vue/create-eslint-config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^0.1.3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">@vue/tsconfig</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^0.1.3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">esbuild</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^0.16.14</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">esbuild-plugin-license</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^1.2.2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">husky</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^8.0.3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">kolorist</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^1.6.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">lint-staged</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^13.1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">minimist</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^1.2.7</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">npm-run-all</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^4.1.5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">prettier</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^2.8.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">prompts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^2.4.2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">zx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^4.3.0</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>接下来，我会介绍每一个包是做什么的</p><ul><li><code>@types/eslint</code></li><li><code>@types/node</code></li><li><code>@types/prompts</code></li></ul><p>以上三个以<code>@types</code>开头的包，都是 TypeScript 类型声明文件</p><ul><li><a href="https://github.com/vuejs/create-eslint-config" target="_blank" rel="noreferrer"><code>@vue/create-eslint-config</code></a></li></ul><p>Vue 官方的 eslint 插件，可以使用 ESLint 检查 SFC 中的<code>&lt;template&gt;</code> 和 <code>&lt;script&gt;</code> ，也的包含项目中的 js 文件</p><ul><li><a href="https://github.com/vuejs/tsconfig" target="_blank" rel="noreferrer"><code>@vue/tsconfig</code></a></li></ul><p>Vue3 项目的基本 tsconfig</p><ul><li><a href="https://esbuild.docschina.org/" target="_blank" rel="noreferrer"><code>esbuild</code></a></li></ul><p>构建工具，用 Go 编写，性能强大</p><ul><li><code>esbuild-plugin-license</code></li></ul><p>用于向最终捆绑包添加许可横幅并输出第三方许 可的 esbuild 插件</p><ul><li><code>husky</code></li><li><code>lint-staged</code></li></ul><p>🚫💩 以上两款工具都是优化团队 git 提交工具</p><ul><li><code>kolorist</code></li></ul><p>用来为命令行着色</p><ul><li><code>minimist</code></li></ul><p>用来解析参数选项</p><ul><li><code>npm-run-all</code></li></ul><p>用于并行或顺序运行多个 npm 脚本的 CLI 工具。</p><ul><li><code>prettier</code></li></ul><p>代码格式化</p><ul><li><code>prompts</code></li></ul><p>轻便、美观、用户友好的交互式提示</p><p><img src="https://github.com/terkelg/prompts/raw/master/media/example.gif" alt=""></p><ul><li><a href="https://github.com/google/zx" target="_blank" rel="noreferrer"><code>zx</code></a></li></ul><p>Google 出品的编写脚本的工具</p><h2 id="源码解读" tabindex="-1">源码解读 <a class="header-anchor" href="#源码解读" aria-hidden="true">#</a></h2><p><img src="`+p+`" alt=""></p><p>进入到 create-vue 源码，核心代码是 index.ts。</p><p>从初始化项目输出图来看。主要是三个步骤。</p><ol><li>输入项目名称，默认值是 vue-project</li><li>询问一些配置 渲染模板等</li><li>完成创建项目，输出运行提示</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// core code</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// async 函数返回的是Promise 可以用 catch 报错</span></span>
<span class="line"><span style="color:#82AAFF;">init</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div>`,43),c=[t];function r(D,F,y,i,u,d){return a(),n("div",null,c)}const h=s(e,[["render",r]]);export{A as __pageData,h as default};
