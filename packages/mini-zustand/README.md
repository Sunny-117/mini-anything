# zustand
## 什么是zustand 
- Zustand 是一个德语单词，表示状态
- Zustand 是一个轻量级的 JavaScript 状态管理库，用于在React应用程序中管理状态
- zustand 使用高阶函数和 hooks 来管理状态，具有极高的灵活性和易用性，使开发人员可以快速、方便地开发React应用程序
- zustand 被称为当下复杂状态管理的最佳选择

## zustand和其他状态管理库的比较
- 简洁易用： zustand 具有简洁的API，不需要过多的配置，易于使用。它不需要学习复杂的概念和语法，可以快速上手
- 高效： zustand 使用了高阶函数和hooks来管理状态，具有极高的效率和性能
- 灵活： zustand 的灵活性极高，可以满足不同的业务需求。开发人员可以根据自己的需求来定制自己的状态管理方案
- 易于集成： zustand 可以快速集成到现有的React项目中，不需要对现有代码进行大量的改动
## useSyncExternalStore
- useSyncExternalStore 是一个自定义 Hook，它提供了一种简单的方法来订阅外部状态管理器，并将其状态同步到 React 组件中
- useSyncExternalStore 函数的第一个参数是一个订阅函数，它接收一个回调函数作为参数，当状态发生变化时，该回调函数将被调用。该回调函数接收两个参数：当前的状态值和上一个状态值
- useSyncExternalStore 函数的第二个参数是一个获取状态值的函数。当组件需要获取当前状态值时，它将调用该函数并返回当前状态值
- useSyncExternalStore 函数返回一个状态值，该值表示当前的状态。当外部状态管理器更新状态时，组件将自动更新状态

## immer
- **在React应用中我们不希望修改状态对象，但如果每次都创建新对象又会带来额外的性能开销**
- **不可变数据结构可以每次都返回一个新的对象，又可以共享未修改的部分**
- immer 以最小的成本实现了不可变数据结构
- 对 draftState 的修改都会反应到 nextState 上
- 而 Immer 使用的结构是共享的， nextState 在结构上又与 currentState 共享未修改的部分

## 异步
- 当你准备好时只需调用 set ， zustand 不关心你的操作是否是异步的
## 日志中间件
- 中间件是一个函数，用于增强store（即状态管理器）的功能
- 中间件可以截获 store 中的 set 方法调用并进行一些操作，例如日志记录、性能跟踪、异常处理等等
- 中间件提供了一种灵活且可扩展的方式来修改或增强store的行为，同时保持了store的独立性和可测试性
- 日志中间件是一个函数，它可以用作 store 的中间件来记录状态的变化和相关信息，例如时间戳、新旧状态等
## 状态分片
- 状态分片是将整个应用程序的状态(state)拆分为不同的部分，每个部分被称为状态分片(slice)
- 这样可以将状态(state)和状态更新的逻辑细分为多个独立的模块，从而使应用程序的状态管理更加清晰和可维护